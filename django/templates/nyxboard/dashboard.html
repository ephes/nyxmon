{% extends "base.html" %}

{% block title %}Nyxmon Dashboard{% endblock %}

{% block extra_css %}
{% endblock %}

{% block content %}
<h2>Services Overview</h2>

{% if services %}
    <ul class="services-list">
        {% for service in services %}
            {% with service_status=service.get_status %}
            <li class="service">
                <div class="service-header {{ service_status }}">
                    <div class="service-name">Service #{{ service.id }}</div>
                    <div class="service-status">{{ service_status|title }}</div>
                </div>
                
                <ul class="health-checks">
                    {% if service.healthcheck_set.all %}
                        {% for check in service.healthcheck_set.all %}
                            {% with check_status=check.get_status %}
                            <li class="health-check {{ check_status }}">
                                <div class="health-check-info">
                                    <div class="health-check-id">Health Check #{{ check.id }}</div>
                                    <div class="health-check-data">{{ check.data }}</div>
                                </div>
                                <div class="health-check-status">{{ check_status|title }}</div>
                            </li>
                            {% endwith %}
                        {% endfor %}
                    {% else %}
                        <li class="no-checks-message">No health checks for this service</li>
                    {% endif %}
                </ul>
            </li>
            {% endwith %}
        {% endfor %}
    </ul>
{% else %}
    <div class="no-services-message">
        <p>No services available. Please add services to monitor.</p>
    </div>
{% endif %}
{% endblock %}